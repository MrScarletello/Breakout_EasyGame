#include "paddle.h"
#include <QBrush> // Клас для зафарбовування фігур

Paddle::Paddle(QGraphicsItem *parent) : QGraphicsRectItem(parent)
{
    // 1. Малюємо саму ракетку.
    // Координати (0,0) — це локальні координати всередині об'єкта.
    // Ширина 100 пікселів, висота 10 пікселів.
    setRect(0, 0, 100, 10);

    // 2. Налаштовуємо колір
    QBrush brush;
    brush.setStyle(Qt::SolidPattern); // Суцільна заливка
    brush.setColor(Qt::blue);         // Синій колір
    setBrush(brush);                  // Застосовуємо пензлик до прямокутника
}

void Paddle::keyPressEvent(QKeyEvent *event)
{
    // Цей метод викликається автоматично Qt, коли натиснута кнопка, і фокус стоїть на ракетці.

    // === Логіка руху ВЛІВО ===
    if (event->key() == Qt::Key_Left) {
        // Перевіряємо, чи ми не виїхали за лівий край екрана (x > 0)
        if (pos().x() > 0) {
            // Зсуваємо ракетку на 15 пікселів вліво (зменшуємо X)
            setPos(x() - 15, y());
        }
    }
    // === Логіка руху ВПРАВО ===
    else if (event->key() == Qt::Key_Right) {
        // Перевіряємо правий край.
        // pos().x() — це лівий край ракетки.
        // + 100 (ширина ракетки) — це правий край ракетки.
        // 800 — ширина вікна.
        if (pos().x() + 100 < 800) {
            // Зсуваємо ракетку на 15 пікселів вправо (збільшуємо X)
            setPos(x() + 15, y());
        }
    }
}
